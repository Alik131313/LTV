<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Стратегическая панель: Жизненный цикл портфеля и SKU</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Strategic Neutrals -->
    <!-- Application Structure Plan: A single-page dashboard with two distinct sections. Section 1: "Portfolio View" displays a time-based line chart of historical/projected demand for entire product categories. Section 2: "SKU Lifecycle Model" displays a status-based line chart for idealized product types. This two-part structure directly addresses the user's request to see both the macro (portfolio) and micro (individual SKU journey) views on one page for comparison and comprehensive strategic analysis. Each section has its own interactive controls. -->
    <!-- Visualization & Content Choices: 
        - Goal: Compare (Portfolio View): Use a multi-series line chart (Chart.js/Canvas) plotting historical sales data over time (2023-2025) for each major product category. Interaction via checkboxes to filter categories.
        - Goal: Visualize a Framework (SKU View): Use a second multi-series line chart to plot idealized demand curves against categorical lifecycle statuses ('Новинка', 'Активный', etc.). Interaction via checkboxes to show/hide idealized curves.
        - Goal: Inform & Define: Two separate grid layouts with styled cards define the "Role-based Categories" and "Status-based Stages", providing a complete reference library for the strategic framework.
        - Justification: This dual-chart approach provides a complete strategic picture, satisfying the user's need to see both the historical reality of the portfolio and the idealized future path for individual products. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 60vh;
            max-height: 500px;
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .legend-checkbox {
            transform: scale(1.2);
            margin-right: 0.5rem;
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            padding: 1.5rem;
            border-left: 4px solid;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            height: 100%;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto px-4 py-8">

        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-900">Стратегическая панель Letta</h1>
            <p class="text-xl text-gray-600 mt-2">Анализ портфеля и модель жизненного цикла SKU</p>
        </header>

        <!-- Section 1: Portfolio View -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-6">Портфельный анализ: Спрос по категориям</h2>
            <div class="chart-container">
                <canvas id="portfolioChart"></canvas>
            </div>
            <div class="mt-8 p-6 bg-white rounded-lg shadow">
                <h3 class="text-2xl font-bold mb-4">Управление графиком портфеля</h3>
                <div id="portfolio-controls" class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div>
            </div>
        </section>

        <!-- Section 2: SKU Lifecycle Model -->
        <section>
            <h2 class="text-3xl font-bold text-center mb-6">Модель жизненного цикла SKU</h2>
             <div class="chart-container">
                <canvas id="plcFrameworkChart"></canvas>
            </div>
            <div class="mt-8 p-6 bg-white rounded-lg shadow">
                <h3 class="text-2xl font-bold mb-4">Управление графиком модели</h3>
                <div id="framework-controls" class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div>
            </div>
        </section>

        <div class="mt-12">
            <h2 class="text-3xl font-bold text-center mb-6">Стратегическая категоризация товаров</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-center">Категории по роли</h3>
                    <div class="space-y-6">
                        <div class="card" style="border-color: #3b82f6;"><h4 class="font-bold text-lg text-blue-700">Базовый</h4><p class="text-gray-600 mt-2">Товар, который занимает значительную долю от всего оборота в ценовой группе и дает постоянные, стабильные продажи.</p></div>
                        <div class="card" style="border-color: #16a34a;"><h4 class="font-bold text-lg text-green-700">Приоритетный</h4><p class="text-gray-600 mt-2">Товар с высоким потенциалом, является приоритетным в рекламе. Продажи могут быть не сбалансированы и проявляться рывками. В будущем должен перерасти в категорию "Базовый".</p></div>
                        <div class="card" style="border-color: #f97316;"><h4 class="font-bold text-lg text-orange-700">Экспериментальный</h4><p class="text-gray-600 mt-2">Товар для ассортимента с небольшой долей. Необходимо тщательно следить за показателями. Как только заказы вырастают, переводить в "Приоритетный".</p></div>
                        <div class="card" style="border-color: #6366f1;"><h4 class="font-bold text-lg text-indigo-700">Сезонный</h4><p class="text-gray-600 mt-2">Товар, который занимает значительную долю в определенный сезон и имеет низкие продажи в остальное время.</p></div>
                        <div class="card" style="border-color: #8b5cf6;"><h4 class="font-bold text-lg text-purple-700">Уникальный</h4><p class="text-gray-600 mt-2">Товар, который образует уникальные комплекты или продается только у нас. Может не иметь аналогов на рынке.</p></div>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-center">Статусы в жизненном цикле</h3>
                    <div class="space-y-6">
                        <div class="card" style="border-color: #d1d5db;"><h4 class="font-bold text-lg">Вводимый</h4><p class="text-gray-600 mt-2">Товар добавлен в номенклатуру, но еще не выставлен на продажу.</p></div>
                        <div class="card" style="border-color: #22c55e;"><h4 class="font-bold text-lg">Новинка</h4><p class="text-gray-600 mt-2">Товар выставлен на сайт. Срок в этом статусе — 30 дней. После этого переходит в "Активный" или "Выводимый".</p></div>
                        <div class="card" style="border-color: #3b82f6;"><h4 class="font-bold text-lg">Активный</h4><p class="text-gray-600 mt-2">Товар, который продается более 30 дней и показывает стабильные результаты.</p></div>
                        <div class="card" style="border-color: #facc15;"><h4 class="font-bold text-lg">Товар в наличии</h4><p class="text-gray-600 mt-2">Ключевой, топовый товар, который постоянно есть на складе в количестве более 3 единиц.</p></div>
                        <div class="card" style="border-color: #ef4444;"><h4 class="font-bold text-lg">Выводимый</h4><p class="text-gray-600 mt-2">Товар, который выводится из продажи. Может быть выставлен на распродажу.</p></div>
                        <div class="card" style="border-color: #6b7280;"><h4 class="font-bold text-lg">Архивный</h4><p class="text-gray-600 mt-2">Товара нет в наличии и продаже он больше не подлежит. Данные используются для анализа.</p></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- DATA FOR PORTFOLIO CHART ---
            const portfolioData = {
                labels: ['2023-H1', '2023-H2', '2024-H1', '2024-H2', '2025-H1 (Прогноз)'],
                categories: [
                    { name: 'Тумбы', demand: [236, 342, 338, 505, 578], color: 'rgba(59, 130, 246, 0.8)', visible: true },
                    { name: 'Стеллажи и Шкафчики', demand: [430, 593, 839, 966, 1228], color: 'rgba(16, 185, 129, 0.8)', visible: true },
                    { name: 'Комоды', demand: [300, 600, 320, 420, 600], color: 'rgba(239, 68, 68, 0.8)', visible: true },
                    { name: 'Столы', demand: [692, 692, 919, 919, 1198.5], color: 'rgba(245, 158, 11, 0.8)', visible: true }
                ]
            };

            // --- DATA FOR FRAMEWORK CHART ---
            const frameworkData = {
                labels: ['Вводимый', 'Новинка', 'Активный', 'Выводимый', 'Архивный'],
                categories: [
                    { name: 'Базовый', demand: [5, 20, 90, 40, 0], color: '#3b82f6', visible: true },
                    { name: 'Приоритетный', demand: [10, 60, 85, 30, 0], color: '#16a34a', visible: true },
                    { name: 'Экспериментальный', demand: [2, 15, 40, 10, 0], color: '#f97316', visible: true },
                    { name: 'Сезонный', demand: [5, 30, 100, 20, 0], color: '#6366f1', visible: true }
                ]
            };

            // --- CHART CREATION LOGIC ---
            function createLineChart(canvasId, chartData, controlsId, yAxisLabel, xAxisLabel) {
                const controlsContainer = document.getElementById(controlsId);
                const datasets = [];

                chartData.categories.forEach((category, index) => {
                    datasets.push({
                        label: category.name,
                        data: category.demand,
                        borderColor: category.color,
                        backgroundColor: `${category.color.replace('0.8', '0.2')}`,
                        fill: true,
                        tension: 0.4,
                        borderWidth: 2,
                        pointRadius: 2,
                        hidden: !category.visible
                    });

                    const controlHtml = `
                        <label for="${controlsId}-cat-${index}" class="flex items-center cursor-pointer text-lg">
                            <input type="checkbox" id="${controlsId}-cat-${index}" data-index="${index}" class="legend-checkbox" ${category.visible ? 'checked' : ''} style="accent-color: ${category.color};">
                            <span style="border-bottom: 2px solid ${category.color}; padding-bottom: 2px;">${category.name}</span>
                        </label>
                    `;
                    controlsContainer.innerHTML += controlHtml;
                });

                const ctx = document.getElementById(canvasId).getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: chartData.labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    label: function(context) {
                                        let unit = yAxisLabel.includes('тыс. шт.') ? 'тыс. шт.' : 'усл. ед.';
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(0)} ${unit}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { title: { display: true, text: xAxisLabel, font: { size: 14 } } },
                            y: { title: { display: true, text: yAxisLabel, font: { size: 14 } }, beginAtZero: true }
                        }
                    }
                });

                controlsContainer.addEventListener('change', (e) => {
                    if (e.target.type === 'checkbox' && e.target.id.startsWith(controlsId)) {
                        const index = e.target.dataset.index;
                        chart.setDatasetVisibility(index, e.target.checked);
                        chart.update();
                    }
                });
            }

            // --- INITIALIZE CHARTS ---
            createLineChart('portfolioChart', portfolioData, 'portfolio-controls', 'Спрос (Продажи, тыс. шт.)', 'Временной период');
            createLineChart('plcFrameworkChart', frameworkData, 'framework-controls', 'Объем продаж / Спрос', 'Статус в жизненном цикле');
        });
    </script>
</body>
</html>
